import Button from '@components/elements/button/Button';
import Link from '@components/elements/link/Link';
import { FormEvent } from 'react';
import { MdArrowForward } from 'react-icons/md';

interface IProps {
  children: JSX.Element | JSX.Element[];
  isFormValid: boolean;
  isFormSubmiting: boolean;
  onFormSubmit: (e: any) => void;
  isSignin: boolean;
  isLoading?: boolean;
}

// TODO Animer legerement en fade le changement de page et les elements

/**
 * ? Composant de mise en page qui englobe le composant de Login et Register
 */
const AuthLayout = ({
  isSignin,
  onFormSubmit,
  isFormValid,
  isFormSubmiting,
  isLoading,
  children,
}: IProps) => {
  const handleSubmit = (e: FormEvent) => {
    e.preventDefault();
    onFormSubmit(e);
  };

  return (
    <div className="min-h-screen flex justify-center items-center">
      <div className="relative w-96 box-border mx-2 py-6 flex flex-col items-center">
        {/* prettier-ignore */}
        <svg className='h-24 w-24 mb-6' viewBox="0 0 80 87" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M39.8372 0L79.6743 69H0L39.8372 0Z" fill="#BD00FF"/>
          <path d="M40 20L63 60H17L40 20Z" fill="white" fillOpacity="0.7"/>
          <path d="M40 26L58 57H22L40 26Z" fill="white"/>
          <g className='fill-black'>
            <path d="M7.31756 87C5.04456 87 3.30955 86.3933 2.11253 85.1798C0.92896 83.9663 0.337173 82.243 0.337173 80.0097C0.337173 78.8995 0.518744 77.9119 0.881886 77.047C1.24503 76.1692 1.74267 75.4334 2.3748 74.8396C3.00694 74.2328 3.76012 73.7746 4.63435 73.4647C5.50858 73.1549 6.45678 73 7.47896 73C8.07074 73 8.60873 73.0452 9.09292 73.1355C9.57711 73.213 10.0008 73.3098 10.3639 73.426C10.7271 73.5293 11.0297 73.639 11.2718 73.7552C11.5139 73.8714 11.6887 73.9617 11.7963 74.0263L10.8885 76.4661C10.4581 76.2467 9.9537 76.0595 9.37536 75.9046C8.81048 75.7497 8.16489 75.6722 7.43861 75.6722C6.95442 75.6722 6.47696 75.7497 6.00622 75.9046C5.54893 76.0595 5.13871 76.3112 4.77557 76.6598C4.42588 76.9954 4.14344 77.4343 3.92824 77.9765C3.71305 78.5187 3.60545 79.177 3.60545 79.9516C3.60545 80.5712 3.6727 81.1521 3.80719 81.6943C3.95514 82.2236 4.18378 82.6819 4.49313 83.0692C4.81592 83.4564 5.23286 83.7663 5.74395 83.9986C6.25504 84.2181 6.87372 84.3278 7.60001 84.3278C8.05729 84.3278 8.46751 84.302 8.83065 84.2503C9.19379 84.1987 9.51659 84.1406 9.79903 84.0761C10.0815 83.9986 10.3303 83.9147 10.5455 83.8243C10.7607 83.734 10.9557 83.6501 11.1305 83.5726L11.9981 85.9931C11.5542 86.2513 10.9288 86.4836 10.1218 86.6902C9.31484 86.8967 8.38009 87 7.31756 87Z" />
            <path d="M16.155 80.0097C16.155 80.6681 16.2357 81.2619 16.397 81.7911C16.5719 82.3204 16.814 82.7787 17.1233 83.166C17.4461 83.5403 17.8362 83.8308 18.2935 84.0373C18.7507 84.2439 19.2753 84.3472 19.8671 84.3472C20.4454 84.3472 20.9632 84.2439 21.4205 84.0373C21.8912 83.8308 22.2813 83.5403 22.5906 83.166C22.9134 82.7787 23.1555 82.3204 23.3169 81.7911C23.4918 81.2619 23.5792 80.6681 23.5792 80.0097C23.5792 79.3513 23.4918 78.7575 23.3169 78.2282C23.1555 77.686 22.9134 77.2278 22.5906 76.8534C22.2813 76.4661 21.8912 76.1692 21.4205 75.9627C20.9632 75.7561 20.4454 75.6528 19.8671 75.6528C19.2753 75.6528 18.7507 75.7626 18.2935 75.982C17.8362 76.1886 17.4461 76.4855 17.1233 76.8728C16.814 77.2471 16.5719 77.7054 16.397 78.2476C16.2357 78.7769 16.155 79.3642 16.155 80.0097ZM26.8273 80.0097C26.8273 81.1586 26.6457 82.172 26.2826 83.0498C25.9329 83.9147 25.4487 84.6441 24.83 85.2379C24.2113 85.8188 23.4716 86.2577 22.6108 86.5546C21.7635 86.8515 20.8489 87 19.8671 87C18.9121 87 18.011 86.8515 17.1637 86.5546C16.3163 86.2577 15.5766 85.8188 14.9445 85.2379C14.3123 84.6441 13.8147 83.9147 13.4516 83.0498C13.0884 82.172 12.9069 81.1586 12.9069 80.0097C12.9069 78.8608 13.0951 77.8539 13.4717 76.9889C13.8483 76.1111 14.3527 75.3753 14.9848 74.7815C15.6304 74.1876 16.3701 73.7423 17.204 73.4454C18.0514 73.1485 18.939 73 19.8671 73C20.822 73 21.7231 73.1485 22.5705 73.4454C23.4178 73.7423 24.1575 74.1876 24.7897 74.7815C25.4218 75.3753 25.9194 76.1111 26.2826 76.9889C26.6457 77.8539 26.8273 78.8608 26.8273 80.0097Z" />
            <path d="M32.598 84.2697C32.7459 84.2826 32.9141 84.2955 33.1023 84.3084C33.3041 84.3084 33.5395 84.3084 33.8085 84.3084C35.3821 84.3084 36.5455 83.9276 37.2986 83.166C38.0653 82.4043 38.4486 81.3522 38.4486 80.0097C38.4486 78.6026 38.0855 77.5376 37.3592 76.8147C36.6329 76.0917 35.4829 75.7303 33.9093 75.7303C33.6941 75.7303 33.4722 75.7367 33.2436 75.7497C33.0149 75.7497 32.7997 75.7626 32.598 75.7884V84.2697ZM41.6967 80.0097C41.6967 81.1715 41.5084 82.1849 41.1318 83.0498C40.7552 83.9147 40.2172 84.6312 39.5179 85.1992C38.8319 85.7672 37.9913 86.1932 36.996 86.4772C36.0008 86.7612 34.8844 86.9032 33.6471 86.9032C33.0822 86.9032 32.4231 86.8774 31.67 86.8257C30.9168 86.787 30.177 86.6966 29.4508 86.5546V73.4841C30.177 73.355 30.9302 73.2711 31.7103 73.2324C32.5038 73.1807 33.183 73.1549 33.7479 73.1549C34.945 73.1549 36.0277 73.284 36.996 73.5422C37.9779 73.8004 38.8185 74.207 39.5179 74.7621C40.2172 75.3172 40.7552 76.0272 41.1318 76.8921C41.5084 77.757 41.6967 78.7962 41.6967 80.0097Z"/>
            <path d="M44.3255 86.7289V73.3098H53.7672V75.8465H47.4728V78.4799H53.0611V80.9585H47.4728V84.1923H54.2312V86.7289H44.3255Z" />
            <path d="M60.6557 73.1549C62.7539 73.1549 64.3611 73.5164 65.4774 74.2393C66.5938 74.9493 67.1519 76.0595 67.1519 77.5698C67.1519 78.5122 66.9233 79.2803 66.466 79.8741C66.0221 80.455 65.3766 80.9133 64.5292 81.249C64.8117 81.5846 65.1076 81.9719 65.4169 82.4108C65.7263 82.8368 66.0289 83.2886 66.3248 83.7663C66.6341 84.231 66.93 84.7215 67.2124 85.2379C67.4949 85.7414 67.7572 86.2384 67.9992 86.7289H64.4687C64.2132 86.29 63.9509 85.8446 63.6819 85.3928C63.4264 84.941 63.1574 84.5021 62.8749 84.0761C62.6059 83.6501 62.3369 83.2499 62.0679 82.8755C61.7989 82.4882 61.5299 82.1397 61.261 81.8299H59.7075V86.7289H56.5603V73.5035C57.2462 73.3744 57.9523 73.284 58.6786 73.2324C59.4183 73.1807 60.0774 73.1549 60.6557 73.1549ZM60.8373 75.7303C60.6086 75.7303 60.4002 75.7367 60.2119 75.7497C60.037 75.7626 59.8689 75.7755 59.7075 75.7884V79.4288H60.5952C61.7788 79.4288 62.6261 79.2868 63.1372 79.0028C63.6483 78.7188 63.9038 78.2347 63.9038 77.5505C63.9038 76.8921 63.6415 76.4274 63.117 76.1563C62.6059 75.8723 61.846 75.7303 60.8373 75.7303Z"/>
            <path d="M73.8295 84.4246C74.2734 84.4246 74.6365 84.3923 74.919 84.3278C75.2148 84.2503 75.4502 84.1535 75.6251 84.0373C75.7999 83.9083 75.921 83.7598 75.9882 83.592C76.0554 83.4242 76.0891 83.237 76.0891 83.0304C76.0891 82.5915 75.8739 82.2301 75.4435 81.9461C75.0131 81.6491 74.2734 81.3329 73.2243 80.9972C72.767 80.8423 72.3097 80.668 71.8524 80.4744C71.3951 80.2679 70.9849 80.0161 70.6218 79.7192C70.2586 79.4094 69.9627 79.0415 69.7341 78.6155C69.5055 78.1766 69.3911 77.6473 69.3911 77.0277C69.3911 76.408 69.5122 75.8529 69.7543 75.3624C69.9964 74.8589 70.3393 74.4329 70.7832 74.0844C71.227 73.7358 71.765 73.4712 72.3971 73.2905C73.0293 73.0968 73.7421 73 74.5356 73C75.4771 73 76.2908 73.0968 76.9768 73.2905C77.6627 73.4841 78.2276 73.6971 78.6714 73.9295L77.7636 76.3112C77.3735 76.1176 76.9364 75.9497 76.4522 75.8077C75.9815 75.6528 75.4099 75.5754 74.7374 75.5754C73.9842 75.5754 73.4395 75.6787 73.1032 75.8852C72.7804 76.0788 72.6191 76.3822 72.6191 76.7953C72.6191 77.0406 72.6796 77.2471 72.8006 77.4149C72.9217 77.5828 73.0898 77.7377 73.305 77.8797C73.5336 78.0088 73.7892 78.1314 74.0716 78.2476C74.3675 78.3509 74.6903 78.4606 75.04 78.5768C75.7663 78.8349 76.3984 79.0931 76.9364 79.3513C77.4744 79.5966 77.9182 79.887 78.2679 80.2227C78.6311 80.5583 78.9001 80.9521 79.0749 81.4039C79.2498 81.8557 79.3372 82.4043 79.3372 83.0498C79.3372 84.302 78.8799 85.2766 77.9653 85.9737C77.0507 86.6579 75.6721 87 73.8295 87C73.2108 87 72.6527 86.9613 72.155 86.8838C71.6574 86.8193 71.2136 86.7354 70.8235 86.6321C70.4469 86.5288 70.1174 86.4191 69.835 86.3029C69.566 86.1867 69.3373 86.077 69.149 85.9737L70.0367 83.5726C70.4537 83.7921 70.9647 83.9922 71.57 84.1729C72.1887 84.3407 72.9418 84.4246 73.8295 84.4246Z"/>
          </g>
        </svg>

        <div className="h-px w-full bg-slate-900 bg-opacity-10 my-4"></div>

        <h2 className="text-slate-900 font-bold text-sm uppercase font-sans-2">
          {isSignin ? 'Log in' : 'Sign up'}
        </h2>

        <div className="h-px w-full bg-slate-900 bg-opacity-10 my-4"></div>

        <form
          className="w-full flex flex-col"
          noValidate
          onSubmit={handleSubmit}
        >
          {children}
          <Button
            as="button"
            isLoading={isLoading}
            styleType="primary"
            sizeType="large"
            // className="h-12 py-3 mb-6"
            className="h-12 mb-6"
            type="submit"
          >
            {isSignin ? 'Log in' : 'Sign up'}
          </Button>
        </form>

        <Button
          as="link"
          href={isSignin ? '/auth/signup' : '/auth/login'}
          styleType="primaryOutline"
          // className="h-12 py-3 mb-6 w-full"
          className="mb-6 w-full"
          sizeType="large"
        >
          {!isSignin ? 'Log in' : 'Sign up'}
        </Button>

        <Link
          href="/explore"
          className="group h-12 mb-6 text-slate-900 text-sm transition font-semibold w-full text-left flex items-center"
        >
          <span className="mr-2">Continue without account</span>
          <MdArrowForward className="transition-transform group-hover:translate-x-1 text-base" />
        </Link>
      </div>
    </div>
  );
};

export default AuthLayout;
